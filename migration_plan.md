# План миграции проекта с JavaScript на TypeScript

Этот документ описывает пошаговый план перехода кодовой базы с JavaScript на TypeScript. Цель — улучшить надежность, поддерживаемость и масштабируемость проекта.

## Этап 1: Настройка и конфигурация

Первый этап включает установку необходимых инструментов и настройку проекта для поддержки TypeScript.

- [x] **Задача 1.1: Установить зависимости**
  - Установить `typescript`.
  - Установить файлы определений типов для ключевых библиотек: `@types/node`, `@types/react`, `@types/react-dom`.

- [x] **Задача 1.2: Создать `tsconfig.json`**
  - Создать в корне проекта файл `tsconfig.json`.
  - Настроить его для работы с Vite и Electron. Важно включить опцию `"allowJs": true`, чтобы разрешить совместное использование `.js` и `.ts` файлов.

- [x] **Задача 1.3: Обновить конфигурацию ESLint**
  - Модифицировать `eslint.config.mjs` для анализа `.ts` и `.tsx` файлов.
  - Добавить плагины и правила, специфичные для TypeScript (`@typescript-eslint/parser`, `@typescript-eslint/eslint-plugin`).

## Этап 2: Миграция кода Renderer (React)

На этом этапе мы постепенно переводим файлы пользовательского интерфейса.

- [ ] **Задача 2.1: Начать с простых компонентов**
  - Выбрать простые компоненты без состояния и зависимостей.
  - Переименовать расширение файла с `.jsx` на `.tsx` (например, `src/renderer/src/components/githubicon.jsx` -> `githubicon.tsx`).
  - Исправить появившиеся ошибки типизации.

- [ ] **Задача 2.2: Добавить типы для Props и State**
  - Для каждого компонента определить `interface` или `type` для его `props`.
  - Типизировать состояние, созданное с помощью `useState`.

- [ ] **Задача 2.3: Мигрировать страницы**
  - Поочередно перевести файлы страниц из `src/renderer/src/pages/` в `.tsx`.
  - Начать с простых страниц, например `Home.jsx`.

- [ ] **Задача 2.4: Мигрировать утилиты Renderer**
  - Перевести вспомогательные файлы, такие как `src/renderer/src/lib/utils.js` в `.ts`.

## Этап 3: Миграция кода Main процесса (Electron)

После миграции рендерера переходим к основной логике приложения.

- [ ] **Задача 3.1: Переименовать файлы в `src/main`**
  - Начать с `src/main/index.js` -> `index.ts`.
  - Постепенно переименовывать и исправлять остальные файлы: `tweakHandler.js`, `dnsHandler.js` и т.д.

- [ ] **Задача 3.2: Типизировать API Electron**
  - Добавить типы для объектов Electron, таких как `BrowserWindow`, `ipcMain`, `app`.

- [ ] **Задача 3.3: Мигрировать Preload скрипты**
  - Перевести `src/main/preload.js` и `src/preload/index.js` в формат `.ts`.

## Этап 4: Включение строгих проверок

Когда все файлы переведены, можно ужесточить правила для повышения качества кода.

- [ ] **Задача 4.1: Обновить `tsconfig.json`**
  - Установить `"noImplicitAny": true`.
  - Установить `"strictNullChecks": true`.
  - Установить `"strict": true` для максимальной безопасности.

- [ ] **Задача 4.2: Исправить новые ошибки**
  - Пройтись по проекту и исправить все ошибки, которые появятся после ужесточения правил.

## Этап 5: Завершение

- [ ] **Задача 5.1: Очистка кода**
  - Удалить временные комментарии, такие как `@ts-ignore` или `@ts-nocheck`, если они использовались.

- [ ] **Задача 5.2: Обновить документацию**
  - Внести изменения в `README.md`, указав, что проект теперь использует TypeScript.
